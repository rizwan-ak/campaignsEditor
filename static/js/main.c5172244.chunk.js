(this["webpackJsonpcampaign-editor"]=this["webpackJsonpcampaign-editor"]||[]).push([[0],{165:function(e,t,a){e.exports=a(241)},170:function(e,t,a){},171:function(e,t,a){},241:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),o=(a(170),a(171),a(34)),l=a(35),s=a(39),u=a(41),m=a(30),d=a(13),p=a(57),h=a(11),g=a.n(h),f=a(20),E=a(301),v=a(280),C=a(151),y=a(306),b=a(304),w=a(287),O=a(288),k=a(155),N=a(289),T=a(281),S=a(282),j=a(283),A=a(284),x=a(285),D=a(286),B=a(140),M=a(38),R="POST_CAMPAIGN",I="DELETE_CAMPAIGN",P="ACTIVATE_CAMPAIGN",G="GET_CAMPAIGNS",_="REORDER_CAMPAIGNS",W="GET_CAMPAIGN",F="GET_COUNTRIES",U="GET_CURRENCIES",V="GET_CONDITION_TYPES",H="GET_ACTION_TYPES",z=a(25),K=a.n(z),L=function(e,t){return function(){var a=Object(f.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,K.a.post("http://eleikoab.test.workplace.nu/admin/api/campaigns/".concat(e,"/activate/").concat(t));case 2:n({type:P});case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Y=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showCancelModal:!1,showSaveModal:!1,copied:!1,reorder:!1,anchorEl:null},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.hideSearch?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{className:"marginRight noBorder",placeholder:"enter",id:"outlined-basic",variant:"outlined",size:"small"}),r.a.createElement(v.a,{className:"noBorder",variant:"contained"},"Search")),this.props.showSave?r.a.createElement("div",{style:{float:"right"}},r.a.createElement(v.a,{variant:"contained",className:"marginRight noBorder",color:"secondary",onClick:function(){return e.setState({showCancelModal:!0})}},r.a.createElement(T.a,{className:"marginRight"})," Cancel"),r.a.createElement(v.a,{className:"noBorder",onClick:function(){e.props.saveFn(),e.setState({showSaveModal:!0})},variant:"contained"},r.a.createElement(S.a,{className:"marginRight"})," Save")):this.state.reorder?r.a.createElement("div",{style:{float:"right"}},r.a.createElement(m.b,{to:"/"},r.a.createElement(v.a,{variant:"contained",className:"marginRight noBorder",onClick:function(){e.props.reorder(!1),e.setState({reorder:!1})},color:"secondary"},r.a.createElement(T.a,{className:"marginRight"})," Cancel")),r.a.createElement(m.b,{to:"/"},r.a.createElement(v.a,{className:"noBorder",onClick:Object(f.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.reorderCampaigns(e.props.reorderData);case 2:e.props.reorder(!1),e.setState({reorder:!1});case 4:case"end":return t.stop()}}),t)}))),variant:"contained"},r.a.createElement(S.a,{className:"marginRight"})," Save"))):r.a.createElement("div",{style:{float:"right"}},r.a.createElement(m.b,{to:"/addCampaign"},r.a.createElement(v.a,{className:"noBorder marginRight",variant:"contained"},r.a.createElement(j.a,{className:"marginRight"}),"Add")),r.a.createElement(m.b,{to:{pathname:"/addCampaign",campaign:this.props.campaign}},r.a.createElement(v.a,{disabled:this.props.hideOptions,variant:"contained",className:"marginRight noBorder"},r.a.createElement(A.a,{className:"marginRight"})," Edit")),r.a.createElement(v.a,{disabled:this.props.hideOptions,variant:"contained",className:"marginRight noBorder","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(t){return e.handleClick(t)}},r.a.createElement(x.a,{className:"marginRight"}),"Actions"),r.a.createElement(C.a,{id:"simple-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:function(){return e.handleClose()}},r.a.createElement(y.a,{onClick:function(){return e.props.activateCampaign(e.props.id,!0)}},"Activate"),r.a.createElement(y.a,{onClick:function(){return e.props.activateCampaign(e.props.id,!1)}},"Deactivate"),r.a.createElement(y.a,{onClick:function(){return e.props.deleteCampaign(e.props.id)}},"Delete")),r.a.createElement(v.a,{onClick:function(){e.props.reorder(!0),e.setState({reorder:!0})},className:"noBorder",variant:"contained"},r.a.createElement(D.a,{className:"marginRight"})," Reorder")),r.a.createElement(b.a,{open:this.state.showCancelModal},r.a.createElement(w.a,null,"Cancel"),r.a.createElement(O.a,{dividers:!0},r.a.createElement(k.a,{gutterBottom:!0},"Are you sure you want to cancel? Your changes will not be saved.")),r.a.createElement(N.a,null,r.a.createElement(m.b,{to:"/"},r.a.createElement(v.a,{className:"noBorder marginRight",onClick:function(){return e.setState({showCancelModal:!1})},variant:"contained",color:"secondary"},"Cancel")),r.a.createElement(m.b,{to:"/"},r.a.createElement(v.a,{className:"noBorder",onClick:function(){return e.setState({showCancelModal:!1})},variant:"contained"},"Stay")))),r.a.createElement(b.a,{open:this.state.showSaveModal},r.a.createElement(w.a,null,"Discount Code Saved"),r.a.createElement(O.a,{dividers:!0},r.a.createElement(k.a,{gutterBottom:!0},"Your disount code is now saved and activated.",r.a.createElement("br",null),"From: ",r.a.createElement("span",{className:"boldText"},"2020-09-15 - 2020-10-15"),r.a.createElement("br",null),"Countries: ",r.a.createElement("span",{className:"boldText"},"SE, DK, US, CA"),r.a.createElement("br",null),"Currencies: ",r.a.createElement("span",{className:"boldText"},"SEK, DKK, SEK, CAD"),r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement(B.CopyToClipboard,{className:"marginTop",text:"PROMO80",onCopy:function(){return e.setState({copied:!0})}},r.a.createElement(v.a,{variant:"outlined"},this.props.code,r.a.createElement("svg",{style:{marginLeft:30},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})))),this.state.copied?r.a.createElement("span",null,"Copied."):null)),r.a.createElement(N.a,null,r.a.createElement(m.b,{to:"/"},r.a.createElement(v.a,{className:"noBorder",onClick:function(){return e.setState({showSaveModal:!1})},variant:"contained"},"Ok")))))}}]),a}(n.Component),J=Object(M.b)(null,(function(e){return{deleteCampaign:function(t){return e(function(e){return function(){var t=Object(f.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.a.delete("http://eleikoab.test.workplace.nu/admin/api/campaigns/".concat(e));case 2:a({type:I});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},reorderCampaigns:function(t){return e((a=t,function(){var e=Object(f.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,K.a.post("http://eleikoab.test.workplace.nu/admin/api/campaigns/sort",{data:a});case 3:t({type:_});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a},activateCampaign:function(t,a){return e(L(t,a))}}}))(Y),$=a(290),q=a(302),Q=a(305),X=a(292),Z=a(291),ee=a(300),te=a(87),ae=a.n(te),ne=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showModal:!1,modalTitle:"",modalBody:"",name:"",startDate:new Date,endDate:new Date,countries:null,currencies:null,isActive:!1,priority:"",discountPercentage:"",actionTypeName:"",conditionsTypeName:"",code:"",numberOfUsages:0},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.onCountriesChange=function(t,a){e.setState({countries:a})},e.onCurrenciesChange=function(t,a){e.setState({currencies:a})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){if(this.props.location.campaign){var e=this.props.location.campaign,t=e.id,a=e.name,n=e.startDate,r=e.endDate,c=e.action,i=e.conditions,o=e.countries,l=e.currencies,s=Object.keys(i[0].voucherCodes)[0],u=i[0].voucherCodes[s];this.setState({id:t,name:a,startDate:n,endDate:r,code:s,numberOfUsages:u,discountPercentage:c.discountPercentage,actionTypeName:c.typeName,conditionsTypeName:i[0].typeName,countries:o[0],currencies:l[0]})}this.props.getCountries(),this.props.getCurrencies(),this.props.getConditionTypes(),this.props.getActionTypes()}},{key:"render",value:function(){var e,t,a=this;return r.a.createElement("div",{className:"App"},r.a.createElement(J,{showSave:!0,hideSearch:!0,saveFn:function(){return a.props.addCampaign(a.state)},code:this.state.code}),r.a.createElement($.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start"},r.a.createElement("div",{className:"marginRight"},r.a.createElement("h4",null,"Information"),r.a.createElement("div",null,r.a.createElement(E.a,{fullWidth:!0,name:"name",value:this.state.name,onChange:this.handleChange,placeholder:"Name",id:"outlined-basic",variant:"outlined"})),r.a.createElement("div",null,r.a.createElement(E.a,{fullWidth:!0,name:"startDate",value:this.state.startDate,onChange:this.handleChange,variant:"outlined",className:"marginTop",type:"datetime-local",defaultValue:"2017-05-24"})),r.a.createElement("div",null,r.a.createElement(E.a,{fullWidth:!0,name:"endDate",value:this.state.endDate,onChange:this.handleChange,variant:"outlined",className:"marginTop",type:"datetime-local",defaultValue:"2017-05-24"})),r.a.createElement(ee.a,{fullWidth:!0,autoHighlight:!0,filterSelectedOptions:!0,className:"marginTop",value:this.state.countries,onChange:this.onCountriesChange,options:null===(e=this.props)||void 0===e?void 0:e.countries,getOptionLabel:function(e){return e.name},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,e.name)},renderInput:function(e){return r.a.createElement(E.a,Object.assign({},e,{placeholder:"Country",variant:"outlined"}))}}),r.a.createElement(ee.a,{fullWidth:!0,name:"currencies",value:this.state.currencies,onChange:this.onCurrenciesChange,autoHighlight:!0,className:"marginTop",options:null===(t=this.props)||void 0===t?void 0:t.currencies,getOptionLabel:function(e){return e.code},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,e.code)},renderInput:function(e){return r.a.createElement(E.a,Object.assign({placeholder:"Currency"},e,{variant:"outlined"}))}})),r.a.createElement("div",{className:"marginRight"},r.a.createElement("h4",null,"Action"),r.a.createElement("div",null,r.a.createElement(q.a,{name:"actionTypeName",value:this.state.actionTypeName,onChange:this.handleChange,variant:"outlined",fullWidth:!0},this.props.actionTypes.map((function(e){return r.a.createElement(y.a,{value:e.key},e.value)})))),r.a.createElement("div",null,r.a.createElement(Q.a,{className:"marginTop",name:"discountPercentage",value:this.state.discountPercentage,onChange:this.handleChange,placeholder:"Order Discount %",endAdornment:r.a.createElement(X.a,{onClick:function(){return a.setState({showModal:!0,modalTitle:"Order Discount %",modalBody:"This discount will be apply to the order total excluding VAT and Shipment."})},position:"end"},r.a.createElement(Z.a,{edge:"end"},r.a.createElement(ae.a,null)))}))),r.a.createElement("div",null,r.a.createElement("h4",null,"Condition"),r.a.createElement("div",null,r.a.createElement(q.a,{name:"conditionsTypeName",value:this.state.conditionsTypeName,onChange:this.handleChange,placeholder:"asd",variant:"outlined",fullWidth:!0},this.props.conditionTypes.map((function(e){return r.a.createElement(y.a,{value:e.key},e.value)})))),r.a.createElement("div",null,r.a.createElement(Q.a,{name:"code",value:this.state.code,onChange:this.handleChange,className:"marginTop",placeholder:"Code",endAdornment:r.a.createElement(X.a,{onClick:function(){return a.setState({showModal:!0,modalTitle:"Campaign Code",modalBody:"The user needs to fill in the campaigncode to get the discount The code is CASE SENSITIVE."})},position:"end"},r.a.createElement(Z.a,{edge:"end"},r.a.createElement(ae.a,null)))})),r.a.createElement("div",null,r.a.createElement(Q.a,{name:"numberOfUsages",value:this.state.numberOfUsages,onChange:this.handleChange,className:"marginTop",type:"number",placeholder:"Number of usages",endAdornment:r.a.createElement(X.a,{onClick:function(){return a.setState({showModal:!0,modalTitle:"Number of Usages",modalBody:"How many times this campaign code can be used before it is consumed."})},position:"end"},r.a.createElement(Z.a,{edge:"end"},r.a.createElement(ae.a,null)))})))),r.a.createElement(b.a,{open:this.state.showModal},r.a.createElement(w.a,null,this.state.modalTitle),r.a.createElement(O.a,{dividers:!0},r.a.createElement(k.a,{gutterBottom:!0},this.state.modalBody)),r.a.createElement(N.a,null,r.a.createElement(v.a,{className:"noBorder",onClick:function(){return a.setState({showModal:!1})},variant:"contained"},"Ok"))))}}]),a}(n.Component),re=Object(M.b)((function(e){return{countries:e.countries,currencies:e.currencies,conditionTypes:e.conditionTypes,actionTypes:e.actionTypes,campaign:e.campaign}}),(function(e){return{getCountries:function(){return e(function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get("http://eleikoab.test.workplace.nu/admin/api/countries");case 2:a=e.sent,t({type:F,payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getCurrencies:function(){return e(function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get("http://eleikoab.test.workplace.nu/admin/api/currencies");case 2:a=e.sent,t({type:U,payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getActionTypes:function(){return e(function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get("http://eleikoab.test.workplace.nu/admin/api/campaigns/actiontypes");case 2:a=e.sent,t({type:H,payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getConditionTypes:function(){return e(function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get("http://eleikoab.test.workplace.nu/admin/api/campaigns/conditiontypes");case 2:a=e.sent,t({type:V,payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addCampaign:function(t){return e(function(e){return function(){var t=Object(f.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.a.post("http://eleikoab.test.workplace.nu/admin/api/campaigns",{id:e.id,action:{discountPercentage:e.discountPercentage,typeName:e.actionTypeName},conditions:[{voucherCodes:Object(p.a)({},e.code,e.numberOfUsages),typeName:e.conditionsTypeName}],name:e.name,priority:0,isActive:!1,startDate:e.startDate,endDate:e.endDate,currencies:[{id:e.currencies.id,code:e.currencies.code}],countries:[{id:e.countries.id,code:e.countries.code,name:e.countries.name}]});case 2:a({type:R});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(ne),ce=a(150),ie=a(293),oe=a(279),le=a(294),se=a(295),ue=a(296),me=a(297),de=a(298),pe=a(307),he=a(152),ge=a(147),fe=a.n(ge),Ee=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={reorder:!1,hideOptions:!0,selectedIndex:-1,active:!1,data:e.props.campaigns},e}return Object(l.a)(a,[{key:"componentWillMount",value:function(){this.props.getCampaigns()}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.campaigns})}},{key:"render",value:function(){var e=this,t=this,a={onDragEnd:function(e,a){var n=Object(ce.a)(t.state.data),r=n.splice(e,1)[0];n.splice(a,0,r),t.setState({data:n})},nodeSelector:"tr",handleSelector:"section"};return r.a.createElement("div",{className:"App"},r.a.createElement(J,{reorderData:this.state.data.map((function(e){return e.id})),reorder:function(t){return e.setState({reorder:t})},hideOptions:this.state.hideOptions,id:this.props.campaign.id,campaign:this.props.campaign}),r.a.createElement(ie.a,{className:"marginTop",component:oe.a},r.a.createElement(he.a,a,r.a.createElement(le.a,null,r.a.createElement(se.a,null,r.a.createElement(ue.a,null,r.a.createElement(me.a,null,"Name"),r.a.createElement(me.a,null,"Country"),r.a.createElement(me.a,null,"Currency"),r.a.createElement(me.a,null,"StartDate"),r.a.createElement(me.a,null,"StartDate"),r.a.createElement(me.a,{align:"right"},"Active"))),r.a.createElement(de.a,null,this.state.data.map((function(t,a){return r.a.createElement(ue.a,{key:a,onClick:function(){e.props.getCampaign(t.id),e.setState({hideOptions:!1,selectedIndex:a})},className:e.state.selectedIndex===a&&"blueBg"},r.a.createElement(me.a,null,t.name),r.a.createElement(me.a,null,t.countries[0].code),r.a.createElement(me.a,null,t.currencies[0].code),r.a.createElement(me.a,null,t.startDate),r.a.createElement(me.a,null,t.endDate),r.a.createElement(me.a,{align:"right"},e.state.reorder?r.a.createElement("section",null,r.a.createElement(fe.a,null)):r.a.createElement(pe.a,{checked:t.isActive,onChange:function(){return e.props.activateCampaign(t.id,!t.isActive)},size:"medium",color:"primary"})))})))))))}}]),a}(n.Component),ve=Object(M.b)((function(e){return{campaigns:e.campaigns,campaign:e.campaign}}),(function(e){return{getCampaigns:function(){return e(function(){var e=Object(f.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get("http://eleikoab.test.workplace.nu/admin/api/campaigns");case 2:a=e.sent,t({type:G,payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getCampaign:function(t){return e(function(e){return function(){var t=Object(f.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.a.get("http://eleikoab.test.workplace.nu/admin/api/campaigns/".concat(e));case 2:n=t.sent,a({type:W,payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},activateCampaign:function(t,a){return e(L(t,a))}}}))(Ee),Ce=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",component:ve,exact:!0}),r.a.createElement(d.a,{path:"/addCampaign",component:re,exact:!0})))}}]),a}(n.Component),ye=a(65),be=a(52),we={campaigns:[],campaign:{},countries:[],currencies:[],actionTypes:[],conditionTypes:[]},Oe=a(148),ke=Object(ye.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case G:return Object(be.a)({},e,{campaigns:n});case W:return Object(be.a)({},e,{campaign:n});case F:return Object(be.a)({},e,{countries:n});case U:return Object(be.a)({},e,{currencies:n});case V:return Object(be.a)({},e,{conditionTypes:n});case H:return Object(be.a)({},e,{actionTypes:n});default:return e}}),Object(ye.a)(Oe.a)),Ne=a(299),Te=a(149),Se=Object(Te.a)({shadows:["none"],palette:{primary:{main:"#45AAF8",contrastText:"#ffffff"},secondary:{main:"#FF675C",contrastText:"#ffffff"}}});var je=function(){return r.a.createElement(M.a,{store:ke},r.a.createElement(Ne.a,{theme:Se},r.a.createElement(Ce,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[165,1,2]]]);
//# sourceMappingURL=main.c5172244.chunk.js.map